{"version":3,"file":"user-documents.js","sources":["../src/js/renders/user-document.js"],"sourcesContent":["import userDocuments from '../user-documents.json';\n\nconst docContainer = document.querySelector('.documents-container');\nconst filterForm = document.querySelector('form');\nconst sortOptions = document.getElementById('sort-selector');\nconst filterOptions = document.getElementById('filter-selector');\nconst filterInput = document.getElementById('search-input');\n\nlet selectedSortOption = '';\nlet filteredDocs = [];\n\nsortOptions.addEventListener('click', sortDocumentList);\nfilterForm.addEventListener('submit', filterDocumentList);\nfilterInput.addEventListener('input', filterDocumentList);\ndocContainer.addEventListener('click', event => {\n  const button = event.target.closest('.js-document-btn');\n  if (button) {\n    toggleContextMenu(button);\n    return;\n  }\n\n  const contextMenu = document.getElementById(\n    'speed-dial-menu-dropdown-alternative'\n  );\n  if (contextMenu && !contextMenu.contains(event.target)) {\n    contextMenu.remove();\n  }\n});\n\nconst documentCollector = docs => {\n  return docs\n    .map(({ id, title, author, uploadDate }) => {\n      return `<li\n      class=\"flex flex-col p-[16px] pr-[32px] border-solid rounded-xl outline sm:flex-row relative\"\n    >\n      <h2 class=\"text-left grow-7\">${title}</h2>\n      <div class=\"flex grow-0 sm:gap-[16px]\">\n        <p>${author}</p>\n        <time datetime=\"${uploadDate}\">${uploadDate}</time>\n      </div>\n      <button data-documentid='${id}' class=\"js-document-btn absolute inset-y-0 right-[12px] transition-[scale] duration-250 ease-in-out hover:scale-[1.2] \" type=\"button\">\n        <img src=\"/img/three-dots.svg\" width=\"20\" height=\"20\" />\n      </button>\n    </li>`;\n    })\n    .join('');\n};\n\nrenderContent(userDocuments);\n\nfunction sortDocumentList(event) {\n  event.preventDefault();\n  const selectOption = event.target.options[event.target.selectedIndex].value;\n  if (selectOption === selectedSortOption || selectOption === 'Sorted by') {\n    return;\n  }\n  selectedSortOption = selectOption;\n  let sortedDocs = [];\n  const documentsList = filteredDocs.length > 0 ? filteredDocs : userDocuments;\n  switch (selectOption) {\n    case 'name-up':\n      sortedDocs = documentsList.toSorted((firstDoc, secondDoc) =>\n        firstDoc.title.localeCompare(secondDoc.title)\n      );\n      break;\n\n    case 'name-down':\n      sortedDocs = documentsList.toSorted((firstDoc, secondDoc) =>\n        secondDoc.title.localeCompare(firstDoc.title)\n      );\n      break;\n\n    case 'author-up':\n      sortedDocs = documentsList.toSorted((firstDoc, secondDoc) =>\n        firstDoc.author.localeCompare(secondDoc.author)\n      );\n      break;\n\n    case 'author-down':\n      sortedDocs = documentsList.toSorted((firstDoc, secondDoc) =>\n        secondDoc.author.localeCompare(firstDoc.author)\n      );\n      break;\n\n    case 'date-up':\n      sortedDocs = documentsList.toSorted((firstDoc, secondDoc) => {\n        const firstDocDate = new Date(firstDoc.uploadDate);\n        const secondDocDate = new Date(secondDoc.uploadDate);\n        return firstDocDate - secondDocDate;\n      });\n      break;\n\n    case 'date-down':\n      sortedDocs = documentsList.toSorted((firstDoc, secondDoc) => {\n        const firstDocDate = new Date(firstDoc.uploadDate);\n        const secondDocDate = new Date(secondDoc.uploadDate);\n        return secondDocDate - firstDocDate;\n      });\n      break;\n  }\n  renderContent(sortedDocs);\n}\n\nfunction filterDocumentList(event) {\n  event.preventDefault();\n  const filterBy = filterOptions.options[filterOptions.selectedIndex].value;\n  const inputValue = filterInput.value;\n  if (filterBy === 'Filter by') {\n    return;\n  }\n  switch (filterBy) {\n    case 'name':\n      filteredDocs = userDocuments.filter(doc =>\n        doc.title.toUpperCase().includes(inputValue.toUpperCase())\n      );\n      break;\n    case 'author':\n      filteredDocs = userDocuments.filter(doc =>\n        doc.author.toUpperCase().includes(inputValue.toUpperCase())\n      );\n      break;\n  }\n  renderContent(filteredDocs);\n}\n\nfunction renderContent(content) {\n  docContainer.innerHTML = '';\n  if (content.length > 0) {\n    docContainer.insertAdjacentHTML('beforeend', documentCollector(content));\n  } else {\n    docContainer.insertAdjacentHTML('beforeend', '<p>No results...</p>');\n  }\n}\n\nfunction toggleContextMenu(btn) {\n  const existingMenu = document.getElementById(\n    'speed-dial-menu-dropdown-alternative'\n  );\n\n  if (existingMenu) {\n    existingMenu.remove(); // Якщо меню вже відкрите — закриваємо\n    return;\n  }\n\n  console.log(btn.dataset.documentid); // Лог documentid\n\n  btn.insertAdjacentHTML(\n    'afterend',\n    `\n    <div id=\"speed-dial-menu-dropdown-alternative\" class=\"absolute right-0 z-10 flex flex-col justify-end py-1 space-y-2 bg-white border border-gray-100 rounded-lg shadow-xs dark:bg-gray-700 dark:border-gray-600\">\n      <ul class=\"text-sm text-gray-500 dark:text-gray-300\">\n        <li>\n          <a href=\"#\" onclick=\"shareDocument('${btn.dataset.documentid}')\" class=\"flex items-center px-5 py-2 border-b border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white dark:border-gray-600\">\n            Share\n          </a>\n        </li>\n        <li>\n          <a href=\"#\" onclick=\"printDocument('${btn.dataset.documentid}')\" class=\"flex items-center px-5 py-2 border-b border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white dark:border-gray-600\">\n            Print\n          </a>\n        </li>\n        <li>\n          <a href=\"#\" onclick=\"saveDocument('${btn.dataset.documentid}')\" class=\"flex items-center px-5 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white\">\n            Save\n          </a>\n        </li>\n        <li>\n          <a href=\"#\" onclick=\"deleteDocument('${btn.dataset.documentid}')\" class=\"flex items-center px-5 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white\">\n            Delete\n          </a>\n        </li>\n      </ul>\n    </div>`\n  );\n}\n"],"names":["docContainer","filterForm","sortOptions","filterOptions","filterInput","selectedSortOption","filteredDocs","sortDocumentList","filterDocumentList","event","button","toggleContextMenu","contextMenu","documentCollector","docs","id","title","author","uploadDate","renderContent","userDocuments","selectOption","sortedDocs","documentsList","firstDoc","secondDoc","firstDocDate","secondDocDate","filterBy","inputValue","doc","content","btn","existingMenu"],"mappings":"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"}